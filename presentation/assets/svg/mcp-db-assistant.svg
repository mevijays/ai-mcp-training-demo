<?xml version="1.0" encoding="UTF-8"?>
<!-- MCP DB Assistant Architecture | SVG 1.1 compliant -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1200 700" width="1200" height="700">
  <defs>
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto-start-reverse">
      <path d="M0,0 L6,3 L0,6 z" fill="#4cc2ff" />
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto-start-reverse">
      <path d="M0,0 L6,3 L0,6 z" fill="#7ef5a2" />
    </marker>
  </defs>
  <rect x="0" y="0" width="1200" height="700" rx="16" fill="#0e141b" />

  <!-- Title -->
  <text x="60" y="70" fill="#e6eef8" font-family="Inter, Arial, sans-serif" font-size="36" font-weight="700">MCP-based DB Assistant (Flask + OpenAI + PostgreSQL)</text>

  <!-- User -->
  <g transform="translate(60,140)">
    <rect width="220" height="120" rx="12" fill="#15202b" stroke="#1f2a36" stroke-width="2" />
    <text x="20" y="48" fill="#e6eef8" font-family="Inter, Arial, sans-serif" font-size="22" font-weight="700">User</text>
    <text x="20" y="80" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="18">Asks: "show me how many customers…"</text>
  </g>

  <!-- Flask MCP Client App -->
  <g transform="translate(340,120)">
    <rect width="300" height="160" rx="12" fill="#173048" stroke="#1f2a36" stroke-width="2" />
    <text x="20" y="46" fill="#e6eef8" font-family="Inter, Arial, sans-serif" font-size="22" font-weight="700">Python Flask MCP Client</text>
    <text x="20" y="78" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">Builds prompt → calls LLM</text>
    <text x="20" y="104" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">Executes SQL via MCP tools</text>
  </g>

  <!-- OpenAI LLM -->
  <g transform="translate(760,80)">
    <rect width="320" height="140" rx="12" fill="#15202b" stroke="#1f2a36" stroke-width="2" />
    <text x="20" y="46" fill="#e6eef8" font-family="Inter, Arial, sans-serif" font-size="22" font-weight="700">OpenAI LLM</text>
    <text x="20" y="78" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">Generates SQL from NL</text>
  </g>

  <!-- FASTMCP PostgreSQL Server -->
  <g transform="translate(760,260)">
    <rect width="320" height="160" rx="12" fill="#15202b" stroke="#1f2a36" stroke-width="2" />
    <text x="20" y="46" fill="#e6eef8" font-family="Inter, Arial, sans-serif" font-size="22" font-weight="700">PostgreSQL MCP Server</text>
    <text x="20" y="78" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">FASTMCP framework</text>
    <text x="20" y="104" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">Tools: run_sql, schema, etc.</text>
  </g>

  <!-- PostgreSQL DB -->
  <g transform="translate(760,460)">
    <rect width="320" height="140" rx="12" fill="#15202b" stroke="#1f2a36" stroke-width="2" />
    <text x="20" y="46" fill="#e6eef8" font-family="Inter, Arial, sans-serif" font-size="22" font-weight="700">PostgreSQL</text>
    <text x="20" y="78" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">users, invoices, …</text>
  </g>

  <!-- Flows -->
  <!-- User → Flask client -->
  <path d="M280,200 L340,200" stroke="#4cc2ff" stroke-width="3" marker-end="url(#arrowBlue)" />
  <text x="300" y="190" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">Prompt</text>

  <!-- Flask client ↔ OpenAI LLM -->
  <path d="M640,160 L760,150" stroke="#7ef5a2" stroke-width="3" marker-end="url(#arrowGreen)" />
  <path d="M760,170 L640,190" stroke="#4cc2ff" stroke-width="3" marker-end="url(#arrowBlue)" />
  <text x="660" y="135" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">NL → SQL</text>
  <text x="660" y="205" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">SQL template</text>

  <!-- Flask client → MCP Server -->
  <path d="M640,220 L760,300" stroke="#4cc2ff" stroke-width="3" marker-end="url(#arrowBlue)" />
  <text x="650" y="260" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">Invoke tools</text>

  <!-- MCP Server → PostgreSQL DB -->
  <path d="M920,420 L920,460" stroke="#7ef5a2" stroke-width="3" marker-end="url(#arrowGreen)" />
  <text x="930" y="445" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">Execute SQL</text>

  <!-- Results back to Flask client and User -->
  <path d="M760,520 L340,520" stroke="#7ef5a2" stroke-width="3" marker-end="url(#arrowGreen)" />
  <text x="480" y="510" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">Rows / Aggregates</text>
  <path d="M340,520 L170,520" stroke="#7ef5a2" stroke-width="3" marker-end="url(#arrowGreen)" />
  <text x="180" y="510" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="16">Answer</text>

  <!-- Example NL prompts -->
  <g transform="translate(60,600)">
    <text x="0" y="0" fill="#a9b6c6" font-family="Inter, Arial, sans-serif" font-size="18">Examples: "How many customers in users table?" · "How many customers have paid invoices?"</text>
  </g>
</svg>
